-if user_signed_in?
  - @applications = Application.where(cv_id: current_user.cvs.pluck(:id))

  - @applications.each do |app|
    %div{:class => "application-#{app.id}"}
      Application for:
      = app.job.title
      %br
      Applied on:
      = app.created_at.strftime('%Y-%m-%d')
      %br
      With CV:
      = app.cv.title
      %br
      Status:
      - if !app.viewed
        Pending evaluation
        = link_to "Cancel Application", cancel_application_profile_path(app.id), method: :delete, remote: true, class: "button cancel-application-button", data: { app_id: app.id }
      - else
        Viewed
      
:javascript
  $(document).on('click', '.cancel-application-button', function(e) {
    e.preventDefault();
    var appId = $(this).data('app-id');
    $('.application-' + appId).slideUp();
  });
